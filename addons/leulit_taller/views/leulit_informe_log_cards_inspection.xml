<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>

        <!-- REPORT DEFECTOS ENCONTRADOS DURANTE EL MANTENIMIENTO -->
        <report
            id="leulit_20231019_0745_report"
            string="Log Cards Inspection"
            model="maintenance.request"
            report_type="qweb-pdf"
            file="leulit_taller.leulit_20231019_0745_informe"
            name="leulit_taller.leulit_20231019_0745_informe"
            paperformat="leulit.paperformat_A4_portrait_without_cabecera"
        />

        <template id="log_cards_inspection_report_header">
            <div class="header" style="width:100%; margin-top: 10px; position: static;">
                <t t-call="leulit_taller.defectos_report_css"/>
                <table class="fullwidth" style="margin-bottom: 10px; table-layout: fixed;">
                    <tr>
                        <td style="font-size:16px; text-align:center; width:33%; vertical-align: middle;" rowspan="2">
                            <div style="white-space: normal; line-height: 1.2;">
                                <span>ICARUS Manteniment, SL.</span><br/>
                                <span>EASA Part 145 ES-173</span>
                            </div>
                        </td>
                        <td style="font-size:20px; text-align:center; width:33%; vertical-align: middle;" rowspan="2">
                            <div style="white-space: normal;">
                                <span><b>Log Cards Inspection</b></span>
                            </div>
                        </td>
                        <td style="font-size:12px; text-align:center; width:17%; vertical-align: middle;">
                            <span>Nº Exp de Mant:</span>
                        </td>
                        <td style="font-size:12px; text-align:center; width:17%; vertical-align: middle;">
                            <span t-esc="n_exp"/>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-size:12px; text-align:center; vertical-align: middle;">
                            <span>Nº de OT:</span>
                        </td>
                        <td style="font-size:12px; text-align:center; vertical-align: middle;">
                            <span t-esc="n_orden_trabajo"/>
                        </td>
                    </tr>
                </table>
            </div>
        </template>

        <template id="log_cards_inspection_report_css">
            <style>
                html {
                    font-family: sans-serif; /* 1 */
                    -ms-text-size-adjust: 100%; /* 2 */
                    -webkit-text-size-adjust: 100%; /* 2 */
                }
                .fullwidth {
                    width: 100%;
                    border-collapse: collapse;
                }
                .noborde {
                    border: 0px none;
                }
                .theadtitle {
                    font-weight: bold;
                    font-size: 3.5687mm !important;
                    text-transform: uppercase;
                }
                .literal {
                    font-size: 3.5687mm;
                }
                .fieldvalue {
                    font-weight: normal;
                    font-size: 3.5687mm;
                }
                .numericfieldvalue {
                    font-weight: normal;
                    font-size: 3.5687mm;
                }
                .page {
                    %if hashcode:
                        background: url(https://s3-eu-west-1.amazonaws.com/helimisc/helipistas-marca-agua.jpg) no-repeat 50% 50%;
                    %else:
                        background: url(https://s3-eu-west-1.amazonaws.com/helimisc/helipistas-marca-agua-informe-interno-2.jpg) no-repeat 50% 50%;
                    %endif
                    width: 230mm;
                    height: 320mm;
                    margin: 0.5mm 0.5mm 0.5mm 0.5mm;  
                    page-break-after: always;
                }
                .pagecontent {
                    width: 230mm;
                    height: 320mm;
                }
                .tdcolored {
                    background-color: rgba(0,0,0,0.40);
                    color: #ffffff;
                }
                .tdcoloredmain {
                    background-color: rgba(0,0,0,1);
                    color: #ffffff;
                }
                .centertext {text-align:center;}
                .heightrow {height: 70px;}
                .nowrap {white-space: nowrap;}
                thead { display: table-header-group }
                tfoot { display: table-header-group }
                tr { page-break-inside: avoid }
                th, tbody td, tfoot td {
                    border: 1px solid #B0B0B0;
                    padding-right:3px;
                    padding-left:3px;
                    padding-top:3px;
                    padding-bottom:3px;
                    text-align:left;
                    font-size:12px;
                    font-weight:normal;
                }
                td{
                    vertical-align: middle
                }
            </style>
        </template>

        <template id="leulit_20231019_0745_informe">
            <t t-call="web.html_container">
                <t t-set="data_report_header_spacing" t-value="20"/>
                <t t-set="data_report_margin_top" t-value="30"/>
                <div class="page">
                    <t t-call="leulit_taller.log_cards_inspection_report_css"/>
                    <t t-call="leulit_taller.log_cards_inspection_report_header" />
                    <div class="row">
                        <t t-if="all_tareas">
                            <t t-foreach="all_tareas" t-as="tarea">
                                <table class="fullwidth">
                                    <tr>
                                        <td class="centertext tdcolored" style="width: 70%;">Tarea</td>
                                        <td class="tdcolored" style="width: 15%;">
                                            <span>Realizado por:</span>
                                        </td>
                                        <td class="tdcolored">
                                            <span>Supervisado por:</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="centertext heightrow"><span t-esc="tarea['name']"/></td>
                                        <td class="centertext"><span t-raw="tarea['realizado_por']"/></td>
                                        <td class="centertext"><span t-raw="tarea['supervisado_por']"/></td>
                                    </tr>
                                    <t t-if="tarea['subtareas']">
                                        <tr>
                                            <td class="tdcolored">Sub-Tareas</td>
                                            <td class="tdcolored" colspan="2"><span>Realizado por:</span></td>
                                        </tr>
                                        <t t-foreach="tarea['subtareas']" t-as="subtarea">
                                            <tr>
                                                <td><span t-esc="subtarea['name']"/></td>
                                                <td class="centertext" colspan="2"><span t-raw="subtarea['realizado_por']"/></td>
                                            </tr>
                                        </t>
                                    </t>
                                </table>
                                <br/>
                            </t>
                        </t>
                        <t t-else="">
                            <t t-set="items" t-value="1"/>
                            <t t-foreach="items" t-as="item">
                                <table class="fullwidth">
                                    <tr>
                                        <td class="tdcolored" style="width: 70%;">Tarea</td>
                                        <td class="tdcolored">
                                            <span>Realizado por:</span>
                                        </td>
                                        <td class="tdcolored">
                                            <span>Supervisado por:</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="heightrow"></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </table>
                                <br/>
                            </t>
                        </t>
                    </div> 
                    <div class="footer">
                        <div class="row text-center" style="border-top: 1px solid black;">
                            <div class="col col-3 offset-9 text-right">
                                <ul class="list-inline mt-2">
                                    <li class="list-inline-item" style="font-size:10px;">Página:</li>
                                    <li class="list-inline-item">
                                        <span style="font-size:10px;">C-</span>
                                        <t t-if="current_page">
                                            <span style="font-size:10px;"><t t-esc="current_page"/></span>
                                        </t>
                                        <t t-else="">
                                            <span class="page" style="font-size:10px;"/>
                                        </t>
                                    </li>
                                    <li class="list-inline-item" style="font-size:10px;">de</li>
                                    <li class="list-inline-item">
                                        <span style="font-size:10px;">C-</span>
                                        <t t-if="total_pages">
                                            <span style="font-size:10px;"><t t-esc="total_pages"/></span>
                                        </t>
                                        <t t-else="">
                                            <span class="topage" style="font-size:10px;"/>
                                        </t>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>

        
    </data>
</odoo>